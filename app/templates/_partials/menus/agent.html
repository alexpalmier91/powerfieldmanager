{# app/templates/_partials/menus/agent.html #}

{# Menu AGENT - ajout : Documents labo (/agent/marketing-documents) #}
{% set items = [
  {"href": "/agent/dashboard",           "label": _("Dashboard"),             "icon": "ğŸ "},
  {"href": "/agent/clients",             "label": _("Mes clients"),           "icon": "ğŸ‘¥"},
  {"href": "/agent/stats-sales",         "label": _("Statistiques ventes"),   "icon": "ğŸ“Š"},
  {"href": "/agent/orders/new",          "label": _("CrÃ©er une commande"),    "icon": "â•"},
  {"href": "/agent/orders",              "label": _("Mes commandes"),         "icon": "ğŸ“„"},
  {"href": "/agent/labos",               "label": _("Mes labos"),             "icon": "ğŸ­"},
  {"href": "/agent/marketing-documents", "label": _("Documents labo"),        "icon": "ğŸ“„"},
  {"href": "/agent/agenda",              "label": _("Agenda"),                "icon": "ğŸ“…"}
] %}

{% set path = request.url.path %}
{% set is_new_order = path.startswith('/agent/orders/new') %}

<nav class="menu" role="navigation">
  {% for it in items %}
    {% if it.href == '/agent/orders' %}
      {# Active pour /agent/orders et ses sous-pages, sauf /agent/orders/new #}
      {% set active = (path.startswith('/agent/orders') and not is_new_order) %}
    {% elif it.href == '/agent/orders/new' %}
      {# Active uniquement pour la page de crÃ©ation #}
      {% set active = is_new_order %}
    {% else %}
      {% set active = path.startswith(it.href) %}
    {% endif %}

    <a class="item {{ 'active' if active }}" href="{{ it.href }}" aria-current="{{ 'page' if active }}">
      <span class="icon">{{ it.icon }}</span>
      <span class="label">{{ it.label }}</span>
    </a>
  {% endfor %}

  <button type="button" id="logoutBtn">
    DÃ©connexion
  </button>
</nav>
